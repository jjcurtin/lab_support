---
title: "Test FollowMee Functions for Snezana"
author: "John Curtin"
date: "`r lubridate::today()`"
output: 
  html_document:
    toc: true 
    toc_depth: 4
editor_options: 
  chunk_output_type: console

---

Run live in console.  No need to knit


### Set up Environment

Absolute paths
```{r, paths}

switch (Sys.info()[['sysname']],
        # PC paths
        Windows = {
          path_admin <- "P:/administration"
          path_lab_support <- "P:/toolboxes/lab_support"},

        # IOS paths
        Darwin = {
          path_admin <- "/Volumes/private/administration"
          path_lab_support <- "/Volumes/toolboxes/lab_support"}
        )
```

Packages for lab workflow 
```{r, packages_workflow, message=FALSE, warning=FALSE}

library(conflicted) # detect and warn about function conflicts
conflict_prefer("filter", "dplyr")
conflict_prefer("select", "dplyr")

library(here)  # establish project directory consistently as working directory
```

FIX: NEED TO UPDATE TO Production copy when done
```{r}
source("~/github/lab_support/fun_followmee.R")
source("~/github/lab_support/get_credentials.R")
```


### Test Code

```{r}
creds <- get_credentials("followmee_snezana", here(path_admin, "credentials.csv"))

get_followmee_devices(creds)
get_followmee_deviceid("Susan's Android", creds)

# Call get_followmee directly to get new data for a subid
first_points <- "Susan's Android" %>% 
  get_followmee_data(creds, n_days = 7)  # override default for now until Susan checks

# if data were previously obtained and saved for a subid, 
# read those data from disk and then pass those data to update_followmee_data()
updated_points <- update_followmee_data(new_points, creds)
```


